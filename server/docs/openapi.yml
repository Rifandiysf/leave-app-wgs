openapi: 3.0.0
info:
  title: Leave Application API
  description: API documentation for the WGS Leave Application server.
  version: 1.0.0
servers:
  - url: /api/v1
    description: Development server

tags:
  - name: Auth
    description: Authentication operations
  - name: Admin
    description: Operations available to administrators
  - name: Super Admin
    description: Operations available only to super administrators
  - name: User
    description: Operations available to standard users (karyawan)

paths:
  /auth/login:
    post:
      tags:
        - Auth
      summary: User login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Successful login
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginSuccessResponse'
        '400':
          description: Validation error (e.g., email not valid, password empty)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/logout:
    get:
      tags:
        - Auth
      summary: User logout
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Successful logout
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Logout successful
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /users:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Get all users (Admin/Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: Number of items per page
        - in: query
          name: search
          schema:
            type: string
          description: Search query for user name or NIK
      responses:
        '200':
          description: A list of users
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserListResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      tags:
        - User
      summary: Deactivate user account (self)
      description: Allows a user to deactivate their own account.
      security:
        - bearerAuth: []
      responses:
        '200':
          description: User deactivated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /users/{nik}:
    get:
      tags:
        - User
      summary: Get user details by NIK
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: nik
          required: true
          schema:
            type: string
          description: User's NIK
      responses:
        '200':
          description: User data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    patch:
      tags:
        - User
      summary: Update user details (self)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: nik
          required: true
          schema:
            type: string
          description: User's NIK
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRequest'
      responses:
        '200':
          description: User updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      tags:
        - Admin
        - Super Admin
      summary: Deactivate a user by NIK (Admin/Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: nik
          required: true
          schema:
            type: string
          description: NIK of the user to deactivate
      responses:
        '200':
          description: User deactivated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /users/{nik}/balance:
    patch:
      tags:
        - Admin
        - Super Admin
      summary: Adjust user's leave balance (Admin/Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: nik
          required: true
          schema:
            type: string
          description: User's NIK
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdjustBalanceRequest'
      responses:
        '200':
          description: Balance adjusted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /users/{nik}/leave-trend:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Get leave trend for a specific user (Admin/Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: nik
          required: true
          schema:
            type: string
          description: User's NIK
      responses:
        '200':
          description: Leave trend data
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    month:
                      type: string
                    total:
                      type: integer
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /users/{nik}/history:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Get leave history for a specific user (Admin/Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: nik
          required: true
          schema:
            type: string
          description: User's NIK
      responses:
        '200':
          description: User's leave history
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LeaveListResponse'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: User not found
        '500':
          description: Internal server error

  /users/me:
    get:
      tags:
        - User
      summary: Get current user's details
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Current user's data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          description: Unauthorized
        '500':
          description: Internal server error

  /users/special:
    get:
      tags:
        - User
      summary: Get available special leaves for the user
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of available special leaves
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SpecialLeave'
        '401':
          description: Unauthorized
        '500':
          description: Internal server error

  /users/mandatory:
    get:
      tags:
        - User
      summary: Get available mandatory leaves for the user
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of available mandatory leaves
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MandatoryLeave'
        '401':
          description: Unauthorized
        '500':
          description: Internal server error

  /users/leave:
    post:
      tags:
        - User
      summary: Create a new leave request
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLeaveRequest'
      responses:
        '201':
          description: Leave request created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Leave'
        '400':
          description: Validation error or business logic error (e.g., insufficient balance, duplicate leave)
        '401':
          description: Unauthorized
        '500':
          description: Internal server error
    get:
      tags:
        - User
      summary: Get user's own leave requests
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: A list of the user's leave requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LeaveListResponse'
        '401':
          description: Unauthorized
        '500':
          description: Internal server error

  /users/leave/search:
    get:
      tags:
        - User
      summary: Search within the user's own leave requests
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: query
          schema:
            type: string
          description: Search by leave title
      responses:
        '200':
          description: A list of matching leave requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LeaveListResponse'
        '401':
          description: Unauthorized
        '500':
          description: Internal server error

  /users/leave/{id}:
    get:
      tags:
        - User
      summary: Get a specific leave request by ID
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: The leave request object
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Leave'
        '401':
          description: Unauthorized
        '404':
          description: Leave request not found
        '500':
          description: Internal server error

  /leaves:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Get all leave requests (Admin/Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: A list of all leave requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LeaveListResponse'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /leaves/search:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Search all leave requests (Admin/Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: query
          schema:
            type: string
          description: Search by user name, NIK, or leave title
      responses:
        '200':
          description: A list of matching leave requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LeaveListResponse'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /leaves/logs:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Get all leave status change logs (Admin/Super Admin)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: A list of leave logs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/LeaveLog'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /leaves/logs/search:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Search leave status change logs (Admin/Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: query
          schema:
            type: string
          description: Search query
      responses:
        '200':
          description: A list of matching leave logs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/LeaveLog'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /leaves/special:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Get all special leaves (Admin/Super Admin)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: A list of all special leaves
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SpecialLeave'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
    post:
      tags:
        - Admin
        - Super Admin
      summary: Create a new special leave type (Admin/Super Admin)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSpecialLeaveRequest'
      responses:
        '201':
          description: Special leave created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpecialLeave'
        '400':
          description: Validation error
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /leaves/special/search:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Search for special leaves (Admin/Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: query
          schema:
            type: string
          description: Search by title
      responses:
        '200':
          description: A list of matching special leaves
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SpecialLeave'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /leaves/special/{id}:
    patch:
      tags:
        - Admin
        - Super Admin
      summary: Update a special leave type (Admin/Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSpecialLeaveRequest'
      responses:
        '200':
          description: Special leave updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpecialLeave'
        '400':
          description: Validation error
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Special leave not found
        '500':
          description: Internal server error

  /leaves/mandatory:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Get all mandatory leaves (Admin/Super Admin)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: A list of all mandatory leaves
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MandatoryLeave'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
    post:
      tags:
        - Admin
        - Super Admin
      summary: Create a new mandatory leave (Admin/Super Admin)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMandatoryLeaveRequest'
      responses:
        '201':
          description: Mandatory leave created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MandatoryLeave'
        '400':
          description: Validation error (e.g., start date not two weeks ahead)
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /leaves/mandatory/search:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Search for mandatory leaves (Admin/Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: query
          schema:
            type: string
          description: Search by title
      responses:
        '200':
          description: A list of matching mandatory leaves
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MandatoryLeave'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /leaves/mandatory/{id}:
    patch:
      tags:
        - Admin
        - Super Admin
      summary: Update a mandatory leave (Admin/Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMandatoryLeaveRequest'
      responses:
        '200':
          description: Mandatory leave updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MandatoryLeave'
        '400':
          description: Validation error
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Mandatory leave not found
        '500':
          description: Internal server error

  /leaves/mandatory-year/{year}:
    patch:
      tags:
        - Admin
        - Super Admin
      summary: Update mandatory leave year settings (Admin/Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: year
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Success message
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /leaves/{id}:
    patch:
      tags:
        - Admin
        - Super Admin
      summary: Update a leave request status (Admin/Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateLeaveStatusRequest'
      responses:
        '200':
          description: Leave status updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Leave'
        '400':
          description: Validation error
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Leave request not found
        '500':
          description: Internal server error

  /uploads/import:
    post:
      tags:
        - Super Admin
      summary: Import users from a file (Super Admin)
      security:
        - bearerAuth: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: File imported successfully
        '400':
          description: No file uploaded or invalid file format
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /uploads/balance-adjustment:
    post:
      tags:
        - Admin
        - Super Admin
      summary: Import balance adjustments from a file (Admin/Super Admin)
      security:
        - bearerAuth: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: File imported successfully
        '400':
          description: No file uploaded or invalid file format
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /uploads/export:
    get:
      tags:
        - Super Admin
      summary: Export user data to a file (Super Admin)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Excel file of users
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /dashboard/statistics:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Get dashboard statistics (Admin/Super Admin)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Dashboard statistics
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /dashboard/trend:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Get dashboard leave trend (Admin/Super Admin)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Dashboard trend data
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /dashboard/leaderboard:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Get dashboard leave leaderboard (Admin/Super Admin)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Dashboard leaderboard data
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /dashboard/pending-leave:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Get pending leave requests for the dashboard (Admin/Super Admin)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of pending leaves
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /balances/logs:
    get:
      tags:
        - Admin
        - Super Admin
      summary: Get all balance adjustment logs (Admin/Super Admin)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: A list of balance adjustment logs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BalanceAdjustment'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /balances/me:
    get:
      tags:
        - User
      summary: Get current user's balance adjustment logs
      security:
        - bearerAuth: []
      responses:
        '200':
          description: A list of the user's balance adjustment logs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BalanceAdjustment'
        '401':
          description: Unauthorized
        '500':
          description: Internal server error

  /setting:
    post:
      tags:
        - Super Admin
      summary: Create application settings (Super Admin)
      security:
        - bearerAuth: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Setting'
      responses:
        '201':
          description: Settings created successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error
    get:
      tags:
        - Super Admin
      summary: Get application settings (Super Admin)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Application settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Setting'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '500':
          description: Internal server error

  /setting/{id}:
    patch:
      tags:
        - Super Admin
      summary: Update application settings (Super Admin)
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Setting'
      responses:
        '200':
          description: Settings updated successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Setting not found
        '500':
          description: Internal server error

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    User:
      type: object
      properties:
        NIK:
          type: string
        fullname:
          type: string
        email:
          type: string
          format: email
        isMale:
          type: boolean
        join_date:
          type: string
          format: date-time
        isActive:
          type: boolean
        role_id:
          type: integer
        status_id:
          type: integer
        tb_roles:
          $ref: '#/components/schemas/Role'
        tb_statuses:
          $ref: '#/components/schemas/Status'

    Role:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        slug:
          type: string

    Status:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string

    Leave:
      type: object
      properties:
        id_leave:
          type: string
          format: uuid
        title:
          type: string
        leave_type:
          type: string
          enum: [personal_leave, mandatory_leave, special_leave]
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        total_days:
          type: integer
        reason:
          type: string
        status:
          type: string
          enum: [pending, approved, rejected, expired]
        NIK:
          type: string
        id_special:
          type: string
          format: uuid
        id_mandatory:
          type: string
          format: uuid

    SpecialLeave:
      type: object
      properties:
        id_special:
          type: string
          format: uuid
        title:
          type: string
        applicable_gender:
          type: string
          enum: [m, f, mf]
        duration:
          type: integer
        type:
          type: string
          enum: [day, month]
        is_active:
          type: boolean
        description:
          type: string

    MandatoryLeave:
      type: object
      properties:
        id_mandatory:
          type: string
          format: uuid
        title:
          type: string
        is_active:
          type: boolean
        description:
          type: string
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date

    Balance:
      type: object
      properties:
        id_balance:
          type: string
          format: uuid
        amount:
          type: integer
        receive_date:
          type: string
          format: date
        expired_date:
          type: string
          format: date
        NIK:
          type: string

    BalanceAdjustment:
      type: object
      properties:
        id_adjustment:
          type: string
          format: uuid
        NIK:
          type: string
        adjustment_value:
          type: integer
        notes:
          type: string
        actor:
          type: string
        balance_year:
          type: integer

    LeaveLog:
      type: object
      properties:
        id_log:
          type: string
          format: uuid
        old_status:
          type: string
        new_status:
          type: string
        reason:
          type: string
        changed_by_nik:
          type: string
        actor_fullname:
          type: string
        id_leave:
          type: string
          format: uuid

    Setting:
      type: object
      properties:
        light_image:
          type: string
        light_background:
          type: string
        # ... and all other setting fields
        dark_image:
          type: string
        dark_background:
          type: string
        # ... etc

    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string

    LoginSuccessResponse:
      type: object
      properties:
        status:
          type: string
          example: success
        message:
          type: string
          example: Login successful
        data:
          type: object
          properties:
            user:
              $ref: '#/components/schemas/User'
            token:
              type: string

    CreateLeaveRequest:
      type: object
      properties:
        title:
          type: string
        leave_type:
          type: string
          enum: [personal_leave, mandatory_leave, special_leave]
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        reason:
          type: string
        id_special:
          type: string
          format: uuid
        id_mandatory:
          type: string
          format: uuid

    UpdateLeaveStatusRequest:
      type: object
      required:
        - status
      properties:
        status:
          type: string
          enum: [approved, rejected]
        reason:
          type: string
          description: Required when status is 'rejected'

    CreateSpecialLeaveRequest:
      type: object
      properties:
        title:
          type: string
        applicable_gender:
          type: string
          enum: [m, f, mf]
        duration:
          type: integer
        type:
          type: string
          enum: [day, month]
        description:
          type: string

    UpdateSpecialLeaveRequest:
      type: object
      properties:
        title:
          type: string
        applicable_gender:
          type: string
          enum: [m, f, mf]
        duration:
          type: integer
        type:
          type: string
          enum: [day, month]
        description:
          type: string
        is_active:
          type: boolean

    CreateMandatoryLeaveRequest:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date

    UpdateMandatoryLeaveRequest:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        is_active:
          type: boolean

    UpdateUserRequest:
      type: object
      properties:
        fullname:
          type: string
        email:
          type: string
          format: email
        password:
          type: string
        isMale:
          type: boolean

    AdjustBalanceRequest:
      type: object
      properties:
        amount:
          type: integer
        notes:
          type: string

    UserListResponse:
      type: object
      properties:
        status:
          type: string
          example: success
        message:
          type: string
          example: Users retrieved successfully
        data:
          type: array
          items:
            $ref: '#/components/schemas/User'
        pagination:
          $ref: '#/components/schemas/Pagination'

    LeaveListResponse:
      type: object
      properties:
        status:
          type: string
          example: success
        message:
          type: string
          example: Leaves retrieved successfully
        data:
          type: array
          items:
            $ref: '#/components/schemas/Leave'
        pagination:
          $ref: '#/components/schemas/Pagination'

    Pagination:
      type: object
      properties:
        page:
          type: integer
        limit:
          type: integer
        total:
          type: integer
        totalPages:
          type: integer

    ErrorResponse:
      type: object
      properties:
        status:
          type: string
          example: fail
        message:
          type: string

    ValidationErrorResponse:
      type: object
      properties:
        status:
          type: string
          example: fail
        message:
          type: string
          example: Validation failed
        errors:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
              message:
                type: string

    SuccessResponse:
      type: object
      properties:
        status:
          type: string
          example: success
        message:
          type: string
