openapi: 3.0.3
info:
  title: Leave Management System
  version: 1.0.0
  description: OpenAPI schema documentation.
paths:
  /auth/login:
    post:
      summary: Login
      description: Login user menggunakan email dan password.
      tags: [Auth]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                password:
                  type: string
                  minLength: 8
                  maxLength: 16
                  example: yourpassword123
              required:
                - email
                - password
      responses:
        '200':
          description: Login berhasil
          headers:
            Authorization:
              description: JWT token dalam format Bearer
              schema:
                type: string
                example: Bearer eyJhbGciOiJIUzI1...
            device-id:
              description: ID perangkat unik
              schema:
                type: string
                example: 123e4567-e89b-12d3-a456-426614174000
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Welcome John Doe
                  data:
                    type: object
                    properties:
                      nik:
                        type: string
                        example: '123456'
                      name:
                        type: string
                        example: John Doe
                      role:
                        $ref: '#/components/schemas/role'
                    required:
                      - nik
                      - name
                      - role
                required:
                  - success
                  - message
                  - data
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          $ref: '#/components/responses/Error401'
        '404':
          $ref: '#/components/responses/Error404'
        '500':
          $ref: '#/components/responses/Error500'
  /auth/logout:
    get:
      summary: Logout
      description: Logout user dan hapus token dari database.
      tags: [Auth]
      security:
        - bearerAuth: []
        - deviceId: []
      responses:
        '200':
          description: Logout berhasil
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: You have been successfully logged out.
                required:
                  - success
                  - message
        '401':
          $ref: '#/components/responses/Error401'
        '500':
          $ref: '#/components/responses/Error500'
  /users/leave:
    post:
      tags: [Dashboard user]
      summary: Mengajukan Permohonan Cuti Baru
      description: Memungkinkan pengguna yang terautentikasi untuk mengajukan permohonan cuti baru. Endpoint ini mencakup validasi untuk body permintaan, duplikasi permohonan cuti, saldo cuti, dan pengecekan cuti khusus agar tidak jatuh pada akhir pekan.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  minLength: 3
                  description: Judul permohonan cuti. Diperlukan kecuali jika leave_type adalah 'special_leave' yang akan diisi secara otomatis dari `tb_special_leave`.
                leave_type:
                  $ref: '#/components/schemas/leave_type'
                  description: 'Jenis cuti: personal_leave, mandatory_leave, atau special_leave.'
                start_date:
                  type: string
                  format: date
                  description: Tanggal mulai cuti (YYYY-MM-DD).
                end_date:
                  type: string
                  format: date
                  description: Tanggal berakhir cuti (YYYY-MM-DD). Diperlukan untuk cuti pribadi atau wajib. Dihitung secara otomatis untuk cuti khusus.
                reason:
                  type: string
                  minLength: 5
                  description: Alasan permohonan cuti. Diperlukan kecuali jika leave_type adalah 'special_leave' yang akan diisi secara otomatis dari `tb_special_leave`.
                id_special:
                  type: string
                  description: Diperlukan untuk jenis 'special_leave', merujuk pada id_special di tb_special_leave.
                  nullable: true
                id_mandatory:
                  type: string
                  description: Diperlukan untuk jenis 'mandatory_leave', merujuk pada id_mandatory di tb_mandatory_leave.
                  nullable: true
              required:
                - leave_type
                - start_date
              oneOf:
                - properties:
                    leave_type:
                      enum:
                        - personal_leave
                        - mandatory_leave
                    end_date:
                      type: string
                      format: date
                  required:
                    - end_date
                - properties:
                    leave_type:
                      enum: [special_leave]
                    id_special:
                      type: string
                  required:
                    - id_special
            examples:
              personalLeaveRequest:
                value:
                  title: Annual Vacation
                  leave_type: personal_leave
                  start_date: '2025-08-01'
                  end_date: '2025-08-05'
                  reason: Family vacation to Bali
              specialLeaveRequest:
                value:
                  leave_type: special_leave
                  start_date: '2025-09-10'
                  id_special: SPL001
      responses:
        '201':
          description: Leave request created successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Leave request created successfully
                  data:
                    $ref: '#/components/schemas/tb_leave'
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          $ref: '#/components/responses/Error401'
        '500':
          $ref: '#/components/responses/Error500'
    get:
      tags: [Dashboard user]
      summary: Mendapatkan Daftar Permohonan Cuti
      description: Mengambil daftar permohonan cuti untuk pengguna yang diautentikasi, dengan opsi paginasi.
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: Nomor halaman untuk paginasi
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Jumlah item per halaman
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '201':
          description: Daftar permohonan cuti berhasil diambil atau tidak ada data.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    examples:
                      - Leave requests retrieved successfully
                      - The data doesn't exist
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/tb_leave'
                        - type: object
                          properties:
                            tb_leave_log:
                              type: object
                              properties:
                                reason:
                                  type: string
                                  description: Alasan log cuti terakhir
                                tb_users:
                                  type: object
                                  properties:
                                    fullname:
                                      type: string
                                      description: Nama lengkap pengguna yang mengubah log
              examples:
                successWithData:
                  value:
                    success: true
                    message: Leave requests retrieved successfully
                    pagination:
                      current_page: 1
                      last_visible_page: 1
                      has_next_page: false
                      item:
                        count: 1
                        total: 1
                        per_page: 10
                    data:
                      - id_leave: some-uuid-1
                        title: Cuti Pribadi
                        leave_type: personal_leave
                        start_date: '2025-07-20'
                        end_date: '2025-07-22'
                        total_days: 3
                        reason: Acara keluarga
                        status: pending
                        created_at: '2025-07-15T10:00:00Z'
                        NIK: '12345'
                        id_special: null
                        id_mandatory: null
                        tb_leave_log:
                          reason: '-'
                          tb_users:
                            fullname: '-'
                noData:
                  value:
                    success: true
                    message: The data doesn't exist
                    pagination:
                      current_page: 1
                      last_visible_page: 0
                      has_next_page: false
                      item:
                        count: 0
                        total: 0
                        per_page: 10
                    data: []
        '401':
          $ref: '#/components/responses/Error401'
        '500':
          $ref: '#/components/responses/Error500'
  /users/leave/search:
    get:
      tags: [Dashboard user]
      summary: Mencari Permohonan Cuti Berdasarkan Filter
      description: Mengambil daftar permohonan cuti untuk pengguna yang diautentikasi, difilter berdasarkan jenis cuti, status, dan nilai pencarian, dengan opsi paginasi.
      security:
        - bearerAuth: []
      parameters:
        - name: value
          in: query
          description: Nilai untuk mencari judul cuti (pencarian tidak peka huruf besar/kecil)
          required: false
          schema:
            type: string
        - name: type
          in: query
          description: Jenis cuti untuk difilter (personal, mandatory, special)
          required: false
          schema:
            type: string
            enum: [personal, mandatory, special]
        - name: status
          in: query
          description: Status cuti untuk difilter (pending, approved, reject)
          required: false
          schema:
            type: string
            enum: [pending, approved, reject]
        - name: page
          in: query
          description: Nomor halaman untuk paginasi
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Jumlah item per halaman
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Data cuti yang difilter berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    examples:
                      - Filtered leave data retrieved successfully
                      - The data doesn't exist
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/tb_leave'
                        - type: object
                          properties:
                            tb_leave_log:
                              type: object
                              properties:
                                reason:
                                  type: string
                                tb_users:
                                  type: object
                                  properties:
                                    fullname:
                                      type: string
              examples:
                successWithData:
                  value:
                    success: true
                    message: Filtered leave data retrieved successfully
                    pagination:
                      current_page: 1
                      last_visible_page: 1
                      has_next_page: false
                      item:
                        count: 1
                        total: 1
                        per_page: 10
                    data:
                      - id_leave: some-uuid-1
                        title: Cuti Filtered
                        leave_type: personal_leave
                        start_date: '2025-07-20'
                        end_date: '2025-07-22'
                        total_days: 3
                        reason: Alasan filter
                        status: approved
                        created_at: '2025-07-15T10:00:00Z'
                        NIK: '12345'
                        id_special: null
                        id_mandatory: null
                        tb_leave_log:
                          reason: '-'
                          tb_users:
                            fullname: '-'
                noData:
                  value:
                    success: true
                    message: The data doesn't exist
                    pagination:
                      current_page: 1
                      last_visible_page: 0
                      has_next_page: false
                      item:
                        count: 0
                        total: 0
                        per_page: 10
                    data: []
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          $ref: '#/components/responses/Error401'
        '500':
          $ref: '#/components/responses/Error500'
  /users/leave/{id}:
    get:
      tags: [Dashboard user]
      summary: Mendapatkan Permohonan Cuti Berdasarkan ID
      description: Mengambil detail permohonan cuti tertentu untuk pengguna yang diautentikasi berdasarkan ID cuti.
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID unik dari permohonan cuti
          required: true
          schema:
            type: string
      responses:
        '201':
          description: Data cuti berhasil diambil berdasarkan ID.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Successfully retrieved leave data by ID
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/tb_leave'
              examples:
                successWithData:
                  value:
                    message: Successfully retrieved leave data by ID
                    data:
                      - id_leave: specific-uuid-1
                        title: Cuti Dadakan
                        leave_type: personal_leave
                        start_date: '2025-10-01'
                        end_date: '2025-10-02'
                        total_days: 2
                        reason: Sakit mendadak
                        status: approved
                        created_at: '2025-09-28T09:00:00Z'
                        NIK: '12345'
                        id_special: null
                        id_mandatory: null
        '401':
          $ref: '#/components/responses/Error401'
        '500':
          $ref: '#/components/responses/Error500'
  /users/{nik}:
    get:
      tags: [Dashboard user]
      summary: Mendapatkan Detail Pengguna Berdasarkan NIK
      description: Mengambil detail profil pengguna tertentu, termasuk informasi saldo cuti dan status permohonan, berdasarkan Nomor Induk Karyawan (NIK). Akses terbatas admin dan super_admin dapat melihat data pengguna manapun; karyawan hanya dapat melihat data mereka sendiri.
      security:
        - bearerAuth: []
      parameters:
        - name: nik
          in: path
          description: NIK (Nomor Induk Karyawan) pengguna yang ingin diambil datanya.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Data pengguna berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Data retrieve successfully
                  requested_by:
                    type: object
                    properties:
                      role:
                        $ref: '#/components/schemas/role'
                      nik:
                        type: string
                  data:
                    type: object
                    properties:
                      NIK:
                        type: string
                      fullname:
                        type: string
                      gender:
                        $ref: '#/components/schemas/gender'
                      status_active:
                        $ref: '#/components/schemas/status_active'
                      role:
                        $ref: '#/components/schemas/role'
                      balance:
                        type: object
                        properties:
                          total_amount:
                            type: integer
                            description: Total saldo cuti yang tersedia (current + carried).
                          current_amount:
                            type: integer
                            description: Saldo cuti yang diterima di tahun berjalan.
                          carried_amount:
                            type: integer
                            description: Saldo cuti yang dibawa dari tahun sebelumnya.
                          days_used:
                            type: integer
                            description: Jumlah hari cuti yang telah disetujui dan digunakan di tahun berjalan.
                          pending_request:
                            type: integer
                            description: Jumlah hari cuti yang sedang dalam status 'pending' di tahun berjalan.
              examples:
                adminRequest:
                  value:
                    success: true
                    message: Data retrieve successfully
                    requested_by:
                      role: admin
                      nik: ADMIN001
                    data:
                      NIK: KRY001
                      fullname: Budi Santoso
                      gender: male
                      status_active: active
                      role: karyawan_tetap
                      balance:
                        total_amount: 10
                        current_amount: 7
                        carried_amount: 3
                        days_used: 2
                        pending_request: 1
                userSelfRequest:
                  value:
                    success: true
                    message: Data retrieve successfully
                    requested_by:
                      role: karyawan_tetap
                      nik: KRY001
                    data:
                      NIK: KRY001
                      fullname: Budi Santoso
                      gender: male
                      status_active: active
                      role: karyawan_tetap
                      balance:
                        total_amount: 10
                        current_amount: 7
                        carried_amount: 3
                        days_used: 2
                        pending_request: 1
        '401':
          $ref: '#/components/responses/Error401'
        '404':
          $ref: '#/components/responses/Error404'
        '500':
          $ref: '#/components/responses/Error500'
    patch:
      summary: Update user
      description: Update user data.
      tags: [User]
      security:
        - bearerAuth: []
      parameters:
        - name: nik
          in: path
          description: NIK of the user to update
          required: true
          schema:
            type: string
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/Error401'
        '500':
          $ref: '#/components/responses/Error500'
    delete:
      summary: Delete user
      description: Delete a user. Admin and super admin access only.
      tags: [User]
      security:
        - bearerAuth: []
      parameters:
        - name: nik
          in: path
          description: NIK of the user to delete
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '500':
          $ref: '#/components/responses/Error500'
  /users/{nik}/leave-trend:
    get:
      summary: Get leave trend
      description: Get the leave trend for a user. Admin and super admin access only.
      tags: [User]
      security:
        - bearerAuth: []
      parameters:
        - name: nik
          in: path
          description: NIK of the user
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LeaveTrendResponse'
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '500':
          $ref: '#/components/responses/Error500'
  /balance/logs:
    get:
      summary: Get all balance adjustment logs
      description: Get all balance adjustment logs with pagination and filtering. Admin and super admin access only.
      tags: [Balance]
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: Page number for pagination
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Number of items per page
          required: false
          schema:
            type: integer
            default: 10
        - name: start
          in: query
          description: Start date for filtering
          required: false
          schema:
            type: string
            format: date
        - name: end
          in: query
          description: End date for filtering
          required: false
          schema:
            type: string
            format: date
        - name: year
          in: query
          description: Year for filtering
          required: false
          schema:
            type: integer
        - name: value
          in: query
          description: Search value for filtering by name or NIK
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BalanceLogResponse'
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '500':
          $ref: '#/components/responses/Error500'
  /balance/logs/me:
    get:
      summary: Get my balance adjustment logs
      description: Get my balance adjustment logs with pagination and filtering.
      tags: [Balance]
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: Page number for pagination
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Number of items per page
          required: false
          schema:
            type: integer
            default: 10
        - name: start
          in: query
          description: Start date for filtering
          required: false
          schema:
            type: string
            format: date
        - name: end
          in: query
          description: End date for filtering
          required: false
          schema:
            type: string
            format: date
        - name: year
          in: query
          description: Year for filtering
          required: false
          schema:
            type: integer
        - name: value
          in: query
          description: Search value for filtering
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BalanceLogResponse'
        '401':
          $ref: '#/components/responses/Error401'
        '500':
          $ref: '#/components/responses/Error500'
  /users/me:
    get:
      summary: Get my data
      description: Get the data of the logged in user.
      tags: [User]
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          $ref: '#/components/responses/Error401'
        '500':
          $ref: '#/components/responses/Error500'
  /upload/import:
    post:
      summary: Import file
      description: Import a file.
      tags: [Upload]
      security:
        - bearerAuth: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FileUploadRequest'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileUploadResponse'
        '500':
          $ref: '#/components/responses/Error500'
  /upload/export:
    get:
      summary: Export file
      description: Export a file.
      tags: [Upload]
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Successful operation
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary
        '500':
          $ref: '#/components/responses/Error500'
  /setting:
    post:
      summary: Create setting
      description: Create a new setting.
      tags: [Setting]
      security:
        - bearerAuth: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SettingRequest'
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SettingResponse'
        '500':
          $ref: '#/components/responses/Error500'
    get:
      summary: Get setting
      description: Get the setting.
      tags: [Setting]
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SettingResponse'
        '500':
          $ref: '#/components/responses/Error500'
  /setting/{id}:
    patch:
      summary: Update setting
      description: Update the setting.
      tags: [Setting]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID of the setting to update
          required: true
          schema:
            type: string
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SettingRequest'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SettingResponse'
        '500':
          $ref: '#/components/responses/Error500'
  /users/{nik}/balance:
    patch:
      tags: [Dashboard admin]
      summary: Menyesuaikan Saldo Cuti Pengguna
      description: Memungkinkan 'admin' atau 'super_admin' untuk menyesuaikan saldo cuti seorang karyawan. Endpoint ini memvalidasi peran pengguna yang membuat permintaan, memastikan pengguna target ada, dan memperbarui saldo cuti serta mencatat penyesuaian.
      security:
        - bearerAuth: []
      parameters:
        - name: nik
          in: path
          description: NIK (Nomor Induk Karyawan) pengguna yang saldonya akan disesuaikan.
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                adjustment_value:
                  type: integer
                  description: Nilai untuk menyesuaikan saldo cuti. Harus angka positif.
                  example: 5
                notes:
                  type: string
                  description: Catatan tentang penyesuaian saldo.
                  example: Penambahan saldo cuti tahunan
              required:
                - adjustment_value
                - notes
      responses:
        '200':
          description: Saldo berhasil disesuaikan.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Balance adjusted successfully
                  data:
                    type: array
                    items:
                      oneOf:
                        - $ref: '#/components/schemas/tb_balance'
                        - $ref: '#/components/schemas/tb_balance_adjustment'
              examples:
                successAdjustment:
                  value:
                    message: Balance adjusted successfully
                    data:
                      - id_balance: some-balance-uuid
                        amount: 15
                        receive_date: '2025-01-01'
                        expired_date: '2025-12-31'
                        NIK: KRY001
                      - id_adjustment: some-adjustment-uuid
                        adjustment_value: 5
                        notes: Penambahan saldo cuti tahunan
                        created_at: '2025-07-24T10:00:00Z'
                        actor: admin
                        NIK: KRY001
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '404':
          $ref: '#/components/responses/Error404'
        '500':
          $ref: '#/components/responses/Error500'
  /users:
    get:
      tags: [Dashboard admin]
      summary: Mendapatkan Semua Pengguna
      description: Mengambil daftar semua pengguna dengan opsi pencarian, filter berdasarkan jenis kelamin, status, dan peran, serta paginasi. Hanya dapat diakses oleh pengguna dengan peran 'admin' atau 'super_admin'.
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: Nomor halaman untuk paginasi
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Jumlah item per halaman
          required: false
          schema:
            type: integer
            default: 10
        - name: search
          in: query
          description: Kata kunci pencarian untuk nama lengkap atau NIK (tidak peka huruf besar/kecil)
          required: false
          schema:
            type: string
        - name: gender
          in: query
          description: Filter berdasarkan jenis kelamin
          required: false
          schema:
            $ref: '#/components/schemas/gender'
        - name: status
          in: query
          description: Filter berdasarkan status aktif
          required: false
          schema:
            $ref: '#/components/schemas/status_active'
        - name: role
          in: query
          description: Filter berdasarkan peran pengguna
          required: false
          schema:
            $ref: '#/components/schemas/role'
      responses:
        '200':
          description: Data pengguna berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Successfully retrieved user data
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        nik:
                          type: string
                          description: Nomor Induk Karyawan.
                        name:
                          type: string
                          description: Nama lengkap pengguna.
                        gender:
                          $ref: '#/components/schemas/gender'
                          description: Jenis kelamin pengguna.
                        last_year_leave:
                          type: integer
                          description: Jumlah cuti yang dibawa dari tahun sebelumnya.
                        this_year_leave:
                          type: integer
                          description: Jumlah cuti yang diterima di tahun berjalan.
                        leave_total:
                          type: integer
                          description: Total saldo cuti (tahun lalu + tahun ini).
                        role:
                          $ref: '#/components/schemas/role'
                          description: Peran pengguna.
                        status:
                          $ref: '#/components/schemas/status_active'
                          description: Status keaktifan pengguna.
              examples:
                successWithData:
                  value:
                    success: true
                    message: Successfully retrieved user data
                    pagination:
                      current_page: 1
                      last_visible_page: 1
                      has_next_page: false
                      item:
                        count: 1
                        total: 1
                        per_page: 10
                    data:
                      - nik: KRY001
                        name: Budi Santoso
                        gender: male
                        last_year_leave: 3
                        this_year_leave: 7
                        leave_total: 10
                        role: karyawan_tetap
                        status: active
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '500':
          $ref: '#/components/responses/Error500'
  /leaves:
    get:
      tags: [Dashboard admin]
      summary: Mendapatkan Semua Pengajuan Cuti (Pending)
      description: Mengambil daftar semua pengajuan cuti dengan status 'pending', lengkap dengan informasi pengguna terkait dan paginasi. Membutuhkan autentikasi dan peran 'super_admin' atau 'admin'.
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: Nomor halaman untuk paginasi.
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Jumlah item per halaman.
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Data cuti berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Leave data retrieved successfully
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/tb_leave'
                        - type: object
                          properties:
                            name:
                              type: string
                              description: Nama lengkap pengguna yang mengajukan cuti.
              examples:
                successResponse:
                  value:
                    success: true
                    message: Leave data retrieved successfully
                    pagination:
                      current_page: 1
                      last_visible_page: 1
                      has_next_page: false
                      item:
                        count: 1
                        total: 1
                        per_page: 10
                    data:
                      - id_leave: leave-123
                        title: Cuti Tahunan
                        leave_type: personal_leave
                        start_date: '2025-08-01'
                        end_date: '2025-08-05'
                        total_days: 5
                        reason: Liburan keluarga
                        status: pending
                        created_at: '2025-07-24T10:00:00Z'
                        NIK: KRY001
                        id_special: null
                        id_mandatory: null
                        name: Budi Santoso
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '500':
          $ref: '#/components/responses/Error500'
  /leaves/search:
    get:
      tags: [Dashboard admin]
      summary: Mencari Pengajuan Cuti Berdasarkan Filter
      description: Mengambil pengajuan cuti yang tertunda dengan filter opsional berdasarkan jenis cuti ('personal', 'mandatory', 'special') dan nilai pencarian (berdasarkan nama lengkap pengguna). Membutuhkan autentikasi dan peran 'super_admin' atau 'admin'.
      security:
        - bearerAuth: []
      parameters:
        - name: type
          in: query
          description: Jenis cuti untuk difilter (misalnya, 'personal', 'mandatory', 'special').
          required: false
          schema:
            type: string
            enum: [personal, mandatory, special]
        - name: value
          in: query
          description: Nilai pencarian untuk nama lengkap pengguna.
          required: false
          schema:
            type: string
        - name: page
          in: query
          description: Nomor halaman untuk paginasi.
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Jumlah item per halaman.
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Data cuti yang difilter berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Filtered leave data retrieved successfully
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/tb_leave'
                        - type: object
                          properties:
                            name:
                              type: string
                              description: Nama lengkap pengguna yang mengajukan cuti.
              examples:
                successFilterByType:
                  value:
                    success: true
                    message: Filtered leave data retrieved successfully
                    pagination:
                      current_page: 1
                      last_visible_page: 1
                      has_next_page: false
                      item:
                        count: 1
                        total: 1
                        per_page: 10
                    data:
                      - id_leave: leave-124
                        title: Cuti Bersalin
                        leave_type: special_leave
                        start_date: '2025-09-01'
                        end_date: '2025-09-30'
                        total_days: 30
                        reason: Melahirkan
                        status: pending
                        created_at: '2025-07-24T10:05:00Z'
                        NIK: KRY002
                        id_special: special-1
                        id_mandatory: null
                        name: Siti Aminah
                successFilterByValue:
                  value:
                    success: true
                    message: Filtered leave data retrieved successfully
                    pagination:
                      current_page: 1
                      last_visible_page: 1
                      has_next_page: false
                      item:
                        count: 1
                        total: 1
                        per_page: 10
                    data:
                      - id_leave: leave-123
                        title: Cuti Tahunan
                        leave_type: personal_leave
                        start_date: '2025-08-01'
                        end_date: '2025-08-05'
                        total_days: 5
                        reason: Liburan keluarga
                        status: pending
                        created_at: '2025-07-24T10:00:00Z'
                        NIK: KRY001
                        id_special: null
                        id_mandatory: null
                        name: Budi Santoso
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '500':
          $ref: '#/components/responses/Error500'
  /leaves/logs:
    get:
      tags: [Dashboard admin]
      summary: Mendapatkan Riwayat Log Cuti
      description: Mengambil riwayat log cuti yang statusnya bukan 'pending', lengkap dengan informasi pengguna terkait dan paginasi. Membutuhkan autentikasi dan peran 'super_admin' atau 'admin'.
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: Nomor halaman untuk paginasi.
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Jumlah item per halaman.
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Data log cuti berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Leave data log retrieved successfully
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Nama lengkap pengguna yang mengajukan cuti.
                        leave_type:
                          $ref: '#/components/schemas/leave_type'
                        start_date:
                          type: string
                          format: date
                        end_date:
                          type: string
                          format: date
                        total_days:
                          type: integer
                        status:
                          $ref: '#/components/schemas/status'
              examples:
                successResponse:
                  value:
                    success: true
                    message: Leave data log retrieved successfully
                    pagination:
                      current_page: 1
                      last_visible_page: 1
                      has_next_page: false
                      item:
                        count: 1
                        total: 1
                        per_page: 10
                    data:
                      - name: Budi Santoso
                        leave_type: personal_leave
                        start_date: '2025-06-01'
                        end_date: '2025-06-05'
                        total_days: 5
                        status: approved
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '500':
          $ref: '#/components/responses/Error500'
  /leaves/logs/search:
    get:
      tags: [Dashboard admin]
      summary: Mencari Riwayat Log Cuti Berdasarkan Filter
      description: Mengambil riwayat log cuti yang statusnya bukan 'pending' dengan filter opsional berdasarkan nilai pencarian (nama lengkap), jenis cuti, dan status cuti. Membutuhkan autentikasi dan peran 'super_admin' atau 'admin'.
      security:
        - bearerAuth: []
      parameters:
        - name: value
          in: query
          description: Nilai pencarian untuk nama lengkap pengguna.
          required: false
          schema:
            type: string
            default: ''
        - name: type
          in: query
          description: Jenis cuti untuk difilter (misalnya, 'personal', 'mandatory', 'special').
          required: false
          schema:
            type: string
            enum: [personal, mandatory, special]
            default: ''
        - name: status
          in: query
          description: Status cuti untuk difilter (misalnya, 'approved', 'rejected').
          required: false
          schema:
            type: string
            enum: [approved, rejected]
            default: ''
        - name: page
          in: query
          description: Nomor halaman untuk paginasi.
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Jumlah item per halaman.
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Data log cuti yang difilter berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Filtered leave data log retrieved successfully
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        name:
                          type: string
                          description: Nama lengkap pengguna yang mengajukan cuti.
                        leave_type:
                          $ref: '#/components/schemas/leave_type'
                        start_date:
                          type: string
                          format: date
                        end_date:
                          type: string
                          format: date
                        total_days:
                          type: integer
                        status:
                          $ref: '#/components/schemas/status'
              examples:
                successResponse:
                  value:
                    success: true
                    message: Filtered leave data log retrieved successfully
                    pagination:
                      current_page: 1
                      last_visible_page: 1
                      has_next_page: false
                      item:
                        count: 1
                        total: 1
                        per_page: 10
                    data:
                      - name: Siti Aminah
                        leave_type: special_leave
                        start_date: '2025-09-01'
                        end_date: '2025-09-30'
                        total_days: 30
                        status: approved
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '500':
          $ref: '#/components/responses/Error500'
  /leaves/special:
    get:
      tags: [Dashboard admin]
      summary: Mendapatkan Semua Cuti Khusus
      description: Mengambil semua data cuti khusus dengan paginasi.
      parameters:
        - name: page
          in: query
          description: Nomor halaman untuk paginasi.
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Jumlah item per halaman.
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Semua data cuti khusus berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: All special leave was successfully taken
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/tb_special_leave'
              examples:
                successResponse:
                  value:
                    success: true
                    message: All special leave was successfully taken
                    pagination:
                      current_page: 1
                      last_visible_page: 1
                      has_next_page: false
                      item:
                        count: 1
                        total: 1
                        per_page: 10
                    data:
                      - id_special: a1b2c3d4-e5f6-7890-1234-567890abcdef
                        title: Cuti Melahirkan
                        applicable_gender: f
                        duration: 90
                        is_active: true
                        description: Cuti untuk ibu melahirkan
        '500':
          $ref: '#/components/responses/Error500'
    post:
      tags: [Dashboard admin]
      summary: Membuat Cuti Khusus Baru
      description: Membuat entri cuti khusus baru. Data yang diterima akan divalidasi.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                id_special:
                  type: string
                  format: uuid
                  maxLength: 50
                  description: ID unik untuk cuti khusus (opsional, akan dihasilkan jika tidak diberikan)
                title:
                  type: string
                  maxLength: 255
                  description: Judul cuti khusus
                applicable_gender:
                  $ref: '#/components/schemas/applicable_gender'
                  description: Jenis kelamin yang berlaku untuk cuti ini (m, f, atau mf)
                duration:
                  type: integer
                  minimum: 1
                  maximum: 365
                  description: Durasi cuti dalam hari
                is_active:
                  type: boolean
                  description: Status aktif cuti khusus (opsional)
                  default: true
                description:
                  type: string
                  description: Deskripsi cuti khusus
              required:
                - title
                - applicable_gender
                - duration
                - description
            examples:
              createSpecialLeaveRequest:
                value:
                  title: Cuti Pernikahan
                  applicable_gender: mf
                  duration: 3
                  description: Cuti untuk karyawan yang menikah
      responses:
        '201':
          description: Cuti khusus berhasil dibuat.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Special leave created successfully
                  data:
                    $ref: '#/components/schemas/tb_special_leave'
              examples:
                successResponse:
                  value:
                    message: Special leave created successfully
                    data:
                      id_special: c1d2e3f4-g5h6-7890-1234-567890abcdef
                      title: Cuti Pernikahan
                      applicable_gender: mf
                      duration: 3
                      is_active: true
                      description: Cuti untuk karyawan yang menikah
        '400':
          $ref: '#/components/responses/Error400'
  /leaves/special/search:
    get:
      tags: [Dashboard admin]
      summary: Mencari Cuti Khusus Berdasarkan Nilai
      description: Mencari data cuti khusus berdasarkan judul dengan paginasi.
      parameters:
        - name: value
          in: query
          description: Nilai pencarian untuk judul cuti khusus.
          required: false
          schema:
            type: string
            default: ''
        - name: page
          in: query
          description: Nomor halaman untuk paginasi.
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Jumlah item per halaman.
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Data cuti khusus yang dicari berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Search special leave data retrieved successfully
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/tb_special_leave'
              examples:
                successResponse:
                  value:
                    success: true
                    message: Search special leave data retrieved successfully
                    pagination:
                      current_page: 1
                      last_visible_page: 1
                      has_next_page: false
                      item:
                        count: 1
                        total: 1
                        per_page: 10
                    data:
                      - id_special: f5e4d3c2-b1a0-9876-5432-10fedcba9876
                        title: Cuti Haji
                        applicable_gender: mf
                        duration: 40
                        is_active: true
                        description: Cuti untuk menjalankan ibadah haji
        '500':
          $ref: '#/components/responses/Error500'
  /leaves/special/{id}:
    patch:
      tags: [Dashboard admin]
      summary: Memperbarui Cuti Khusus
      description: Memperbarui data cuti khusus yang ada berdasarkan ID. Data yang diterima akan divalidasi dan hanya properti yang disediakan yang akan diperbarui (parsial).
      parameters:
        - name: id
          in: path
          description: ID dari cuti khusus yang akan diperbarui.
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  maxLength: 255
                  description: Judul cuti khusus
                applicable_gender:
                  $ref: '#/components/schemas/applicable_gender'
                  description: Jenis kelamin yang berlaku untuk cuti ini (m, f, atau mf)
                duration:
                  type: integer
                  minimum: 1
                  maximum: 365
                  description: Durasi cuti dalam hari
                is_active:
                  type: boolean
                  description: Status aktif cuti khusus
                description:
                  type: string
                  description: Deskripsi cuti khusus
            examples:
              updateSpecialLeaveRequest:
                value:
                  title: Cuti Pernikahan Diperbarui
                  duration: 5
      responses:
        '200':
          description: Cuti khusus berhasil diperbarui.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Special leave updated successfully
                  data:
                    $ref: '#/components/schemas/tb_special_leave'
              examples:
                successResponse:
                  value:
                    message: Special leave updated successfully
                    data:
                      id_special: c1d2e3f4-g5h6-7890-1234-567890abcdef
                      title: Cuti Pernikahan Diperbarui
                      applicable_gender: mf
                      duration: 5
                      is_active: true
                      description: Cuti untuk karyawan yang menikah
        '400':
          $ref: '#/components/responses/Error400'
  /leaves/mandatory:
    get:
      tags: [Dashboard admin]
      summary: Mendapatkan Semua Cuti Wajib
      description: Mengambil semua data cuti wajib dengan paginasi.
      parameters:
        - name: page
          in: query
          description: Nomor halaman untuk paginasi.
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Jumlah item per halaman.
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Semua data cuti wajib berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: All mandatory leave was successfully taken
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/tb_mandatory_leave'
              examples:
                successResponse:
                  value:
                    success: true
                    message: All mandatory leave was successfully taken
                    pagination:
                      current_page: 1
                      last_visible_page: 1
                      has_next_page: false
                      item:
                        count: 1
                        total: 1
                        per_page: 10
                    data:
                      - id_mandatory: a1b2c3d4-e5f6-7890-1234-567890abcdef
                        title: Cuti Bersama Idul Fitri
                        duration: 2
                        is_active: true
                        description: Cuti wajib saat hari raya Idul Fitri
        '500':
          $ref: '#/components/responses/Error500'
    post:
      tags: [Dashboard admin]
      summary: Membuat Cuti Wajib Baru
      description: Membuat entri cuti wajib baru. Data yang diterima akan divalidasi dan `start_date` harus setidaknya 14 hari dari hari ini.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                id_mandatory:
                  type: string
                  format: uuid
                  maxLength: 50
                  description: ID unik untuk cuti wajib (opsional, akan dihasilkan jika tidak diberikan)
                title:
                  type: string
                  maxLength: 255
                  description: Judul cuti wajib
                is_active:
                  type: boolean
                  description: Status aktif cuti wajib (opsional)
                  default: true
                start_date:
                  type: string
                  format: date
                  description: Tanggal mulai cuti wajib. Harus setidaknya 14 hari dari tanggal saat ini.
                end_date:
                  type: string
                  format: date
                  description: Tanggal berakhir cuti wajib.
                description:
                  type: string
                  description: Deskripsi cuti wajib
              required:
                - title
                - start_date
                - end_date
                - description
            examples:
              createMandatoryLeaveRequest:
                value:
                  title: Cuti Wajib Tahun Baru
                  start_date: '2025-01-15'
                  end_date: '2025-01-15'
                  description: Cuti wajib untuk merayakan Tahun Baru
      responses:
        '201':
          description: Cuti wajib berhasil dibuat.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Mandatory leave created successfully
                  data:
                    $ref: '#/components/schemas/tb_mandatory_leave'
              examples:
                successResponse:
                  value:
                    success: true
                    message: Mandatory leave created successfully
                    data:
                      id_mandatory: c1d2e3f4-g5h6-7890-1234-567890abcdef
                      title: Cuti Wajib Tahun Baru
                      duration: null
                      is_active: true
                      start_date: '2025-01-15T00:00:00.000Z'
                      end_date: '2025-01-15T00:00:00.000Z'
                      description: Cuti wajib untuk merayakan Tahun Baru
        '400':
          $ref: '#/components/responses/Error400'
  /leaves/mandatory/search:
    get:
      tags: [Dashboard admin]
      summary: Mencari Cuti Wajib Berdasarkan Nilai
      description: Mencari data cuti wajib berdasarkan judul dengan paginasi.
      parameters:
        - name: value
          in: query
          description: Nilai pencarian untuk judul cuti wajib.
          required: false
          schema:
            type: string
            default: ''
        - name: page
          in: query
          description: Nomor halaman untuk paginasi.
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Jumlah item per halaman.
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Data cuti wajib yang dicari berhasil diambil.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Search mandatory leave data retrived succesfully
                  pagination:
                    $ref: '#/components/schemas/Pagination'
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/tb_mandatory_leave'
              examples:
                successResponse:
                  value:
                    success: true
                    message: Search mandatory leave data retrived succesfully
                    pagination:
                      current_page: 1
                      last_visible_page: 1
                      has_next_page: false
                      item:
                        count: 1
                        total: 1
                        per_page: 10
                    data:
                      - id_mandatory: f5e4d3c2-b1a0-9876-5432-10fedcba9876
                        title: Cuti Hari Kemerdekaan
                        duration: 1
                        is_active: true
                        description: Cuti untuk merayakan hari kemerdekaan
        '500':
          $ref: '#/components/responses/Error500'
  /leaves/mandatory/{id}:
    patch:
      tags: [Dashboard admin]
      summary: Memperbarui Cuti Wajib
      description: Memperbarui data cuti wajib yang ada berdasarkan ID. Data yang diterima akan divalidasi dan hanya properti yang disediakan yang akan diperbarui (parsial).
      parameters:
        - name: id
          in: path
          description: ID dari cuti wajib yang akan diperbarui.
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  maxLength: 255
                  description: Judul cuti wajib
                is_active:
                  type: boolean
                  description: Status aktif cuti wajib
                start_date:
                  type: string
                  format: date
                  description: Tanggal mulai cuti wajib.
                end_date:
                  type: string
                  format: date
                  description: Tanggal berakhir cuti wajib.
                description:
                  type: string
                  description: Deskripsi cuti wajib
            examples:
              updateMandatoryLeaveRequest:
                value:
                  title: Cuti Wajib Tahun Baru Diperbarui
                  is_active: false
      responses:
        '200':
          description: Cuti wajib berhasil diperbarui.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Mandatory leave updated successfully
                  data:
                    $ref: '#/components/schemas/tb_mandatory_leave'
              examples:
                successResponse:
                  value:
                    message: Mandatory leave updated successfully
                    data:
                      id_mandatory: c1d2e3f4-g5h6-7890-1234-567890abcdef
                      title: Cuti Wajib Tahun Baru Diperbarui
                      duration: null
                      is_active: false
                      start_date: '2025-01-15T00:00:00.000Z'
                      end_date: '2025-01-15T00:00:00.000Z'
                      description: Cuti wajib untuk merayakan Tahun Baru
        '400':
          $ref: '#/components/responses/Error400'
  /leaves/{id}:
    patch:
      tags: [Dashboard admin]
      summary: Memperbarui Status Cuti Berdasarkan ID
      description: Memperbarui status pengajuan cuti (disetujui/ditolak) dan membuat log perubahan. Endpoint ini membutuhkan autentikasi dan otorisasi oleh `super_admin` atau `admin`.
      parameters:
        - name: id
          in: path
          description: ID unik dari pengajuan cuti yang akan diperbarui.
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  $ref: '#/components/schemas/status'
                reason:
                  type: string
                  maxLength: 255
                  description: Alasan untuk perubahan status cuti.
              required:
                - status
                - reason
            examples:
              approveLeave:
                value:
                  status: approved
                  reason: Pengajuan cuti disetujui setelah peninjauan.
              rejectLeave:
                value:
                  status: rejected
                  reason: Pengajuan cuti ditolak karena tidak sesuai kebijakan perusahaan.
      responses:
        '200':
          description: Data cuti berhasil diperbarui.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Successfully updated leave data
                  data:
                    type: object
                    properties:
                      updated_leave:
                        $ref: '#/components/schemas/tb_leave'
              examples:
                successResponse:
                  value:
                    success: true
                    message: Successfully updated leave data
                    data:
                      updated_leave:
                        id_leave: some-uuid-1
                        title: Cuti Tahunan
                        leave_type: personal_leave
                        start_date: '2024-07-20'
                        end_date: '2024-07-25'
                        total_days: 5
                        reason: Liburan keluarga
                        status: approved
                        created_at: '2024-07-10T10:00:00Z'
                        NIK: '1234567890'
                        id_special: null
                        id_mandatory: null
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '404':
          $ref: '#/components/responses/Error404'
        '500':
          $ref: '#/components/responses/Error500'
components:
  schemas:
    tb_balance:
      type: object
      properties:
        id_balance:
          type: string
        amount:
          type: integer
        receive_date:
          type: string
          format: date
        expired_date:
          type: string
          format: date
        NIK:
          type: string
      required:
        - id_balance
        - amount
        - receive_date
        - expired_date
        - NIK
    SettingRequest:
      type: object
      properties:
        light_image:
          type: string
          format: binary
        dark_image:
          type: string
          format: binary
        light_background:
          type: string
        light_foreground:
          type: string
        light_card:
          type: string
        light_cardForeground:
          type: string
        light_primary:
          type: string
        light_primaryForeground:
          type: string
        light_secondary:
          type: string
        light_secondaryForeground:
          type: string
        dark_background:
          type: string
        dark_foreground:
          type: string
        dark_card:
          type: string
        dark_cardForeground:
          type: string
        dark_primary:
          type: string
        dark_primaryForeground:
          type: string
        dark_secondary:
          type: string
        dark_secondaryForeground:
          type: string
    SettingResponse:
      type: object
      properties:
        message:
          type: string
        data:
          type: object
    SpecialLeaveResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Search special leave data retrieved successfully
        pagination:
          $ref: '#/components/schemas/Pagination'
        data:
          type: array
          items:
            $ref: '#/components/schemas/tb_special_leave'
    MandatoryLeaveResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Search mandatory leave data retrived succesfully
        pagination:
          $ref: '#/components/schemas/Pagination'
        data:
          type: array
          items:
            $ref: '#/components/schemas/tb_mandatory_leave'
    DashboardStatisticsResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Statistics retrieved successfully
        data:
          type: object
    DashboardTrendResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Trend data retrieved successfully
        data:
          type: array
          items:
            type: object
    DashboardLeaderboardResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Leaderboard data retrieved successfully
        data:
          type: array
          items:
            type: object
    DashboardPendingLeaveResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Pending leave data retrieved successfully
        data:
          type: array
          items:
            type: object
    BalanceLogResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Balance Adjustment logs retrieved successfully
        pagination:
          $ref: '#/components/schemas/Pagination'
        data:
          type: array
          items:
            $ref: '#/components/schemas/tb_balance_adjustment'
    tb_leave:
      type: object
      properties:
        id_leave:
          type: string
        title:
          type: string
        leave_type:
          $ref: '#/components/schemas/leave_type'
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        total_days:
          type: integer
        reason:
          type: string
        status:
          $ref: '#/components/schemas/status'
        created_at:
          type: string
          format: date-time
        NIK:
          type: string
        id_special:
          type: string
          nullable: true
        id_mandatory:
          type: string
          nullable: true
      required:
        - id_leave
        - title
        - leave_type
        - start_date
        - end_date
        - total_days
        - reason
        - status
        - created_at
        - NIK
    tb_mandatory_leave:
      type: object
      properties:
        id_mandatory:
          type: string
        title:
          type: string
        duration:
          type: integer
        is_active:
          type: boolean
        description:
          type: string
      required:
        - id_mandatory
        - title
        - duration
        - is_active
        - description
    tb_special_leave:
      type: object
      properties:
        id_special:
          type: string
        title:
          type: string
        applicable_gender:
          $ref: '#/components/schemas/applicable_gender'
        duration:
          type: integer
        is_active:
          type: boolean
        description:
          type: string
      required:
        - id_special
        - title
        - applicable_gender
        - duration
        - is_active
        - description
    tb_users:
      type: object
      properties:
        NIK:
          type: string
        fullname:
          type: string
        email:
          type: string
          format: email
        password:
          type: string
        gender:
          $ref: '#/components/schemas/gender'
        role:
          $ref: '#/components/schemas/role'
        status_active:
          $ref: '#/components/schemas/status_active'
        join_date:
          type: string
          format: date
      required:
        - NIK
        - fullname
        - email
        - password
        - gender
        - role
        - status_active
        - join_date
    tb_balance_adjustment:
      type: object
      properties:
        id_adjustment:
          type: string
        adjustment_value:
          type: integer
        notes:
          type: string
        created_at:
          type: string
          format: date-time
        actor:
          type: string
        NIK:
          type: string
      required:
        - id_adjustment
        - adjustment_value
        - created_at
        - actor
        - NIK
    tb_leave_log:
      type: object
      properties:
        id_log:
          type: string
        old_status:
          $ref: '#/components/schemas/status'
        new_status:
          $ref: '#/components/schemas/status'
        reason:
          type: string
        changed_at:
          type: string
          format: date-time
        changed_by_nik:
          type: string
        id_leave:
          type: string
      required:
        - id_log
        - old_status
        - new_status
        - reason
        - changed_at
        - changed_by_nik
        - id_leave
    gender:
      type: string
      enum: [male, female]
    applicable_gender:
      type: string
      enum: [m, f, mf]
    leave_type:
      type: string
      enum: [personal_leave, mandatory_leave, special_leave]
    role:
      type: string
      enum:
        - karyawan_tetap
        - karyawan_kontrak
        - magang
        - admin
        - super_admin
    status:
      type: string
      enum: [pending, approved, rejected]
    status_active:
      type: string
      enum: [active, resign]
    Pagination:
      type: object
      properties:
        current_page:
          type: integer
          description: Halaman saat ini.
        last_visible_page:
          type: integer
          description: Total halaman yang tersedia.
        has_next_page:
          type: boolean
          description: Menunjukkan apakah ada halaman berikutnya.
        item:
          type: object
          properties:
            count:
              type: integer
              description: Jumlah item di halaman saat ini.
            total:
              type: integer
              description: Total item di seluruh koleksi.
            per_page:
              type: integer
              description: Jumlah item per halaman.
    UserResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Data retrieve successfully
        data:
          $ref: '#/components/schemas/tb_users'
    LeaveTrendResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Leave trend data retrieved successfully
        data:
          type: array
          items:
            type: object
    FileUploadRequest:
      type: object
      properties:
        file:
          type: string
          format: binary
    FileUploadResponse:
      type: object
      properties:
        message:
          type: string
          example: File uploaded successfully
  responses:
    Error400:
      description: Bad Request
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              status_code:
                type: integer
                example: 400
              message:
                type: string
              detail:
                type: string
                nullable: true
    Error401:
      description: Unauthorized
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              status_code:
                type: integer
                example: 401
              message:
                type: string
                example: Unauthorized. please login to access this resources.
              detail:
                type: string
                example: Login session expired
                nullable: true
    Error403:
      description: Forbidden
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              status_code:
                type: integer
                example: 403
              message:
                type: string
                example: Access denied.
              detail:
                type: string
                nullable: true
    Error404:
      description: Not Found
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              status_code:
                type: integer
                example: 404
              message:
                type: string
              detail:
                type: string
                nullable: true
    Error500:
      description: Internal Server Error
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              status_code:
                type: integer
                example: 500
              message:
                type: string
                example: Internal Server Error
              detail:
                type: string
                nullable: true
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
    deviceId:
      type: apiKey
      in: header
      name: device-id